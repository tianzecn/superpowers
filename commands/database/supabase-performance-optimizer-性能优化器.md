---
allowed-tools: Read, Write, Edit, Bash
argument-hint: [optimization-type] | --queries | --indexes | --storage | --rls | --functions
description: 通过智能分析和建议优化 Supabase 数据库性能
---

# Supabase 性能优化器

通过智能分析和自动化改进优化 Supabase 数据库性能：**$ARGUMENTS**

## 当前性能上下文

- Supabase 指标：通过 MCP 集成获取数据库性能数据
- 查询模式：!`find . -name "*.sql" -o -name "*.ts" -o -name "*.js" | xargs grep -l "from\|select\|insert\|update" 2>/dev/null | head -5` 应用程序查询
- 架构分析：当前表结构和关系复杂度
- 性能日志：最近的查询执行时间和资源使用模式

## 任务

执行综合性能优化，包含智能分析和自动化改进：

**优化重点**：使用 $ARGUMENTS 专注于查询优化、索引管理、存储优化、RLS 策略或数据库函数

**性能优化框架**：
1. **性能分析** - 分析查询执行时间、识别慢操作、评估资源利用、评价瓶颈
2. **索引优化** - 分析索引使用、推荐新索引、识别冗余索引、优化索引策略
3. **查询优化** - 审查应用程序查询、建议查询改进、实施查询缓存、优化连接操作
4. **存储优化** - 分析存储模式、推荐归档策略、优化数据类型、实施压缩
5. **RLS 策略审查** - 分析行级安全策略、优化策略性能、降低策略复杂度、提高安全效率
6. **函数优化** - 审查数据库函数、优化函数性能、实施缓存策略、改进执行计划

**高级功能**：自动化索引推荐、查询计划分析、性能趋势监控、成本优化、扩展建议。

**监控集成**：实时性能跟踪、告警配置、性能回归检测、优化影响测量。

**输出**：综合优化计划，包含性能改进、索引推荐、查询优化和监控设置。
